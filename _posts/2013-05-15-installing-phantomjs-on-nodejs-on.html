---
layout: post
title: Installing PhantomJS on NodeJS on Windows behind corporate proxy
date: '2013-05-16T09:03:00.000+10:00'
author: sacah
tags: 
modified_time: '2013-05-16T09:17:31.340+10:00'
blogger_id: tag:blogger.com,1999:blog-4605009901196846959.post-4921378948789225503
blogger_orig_url: http://www.sacah.net/2013/05/installing-phantomjs-on-nodejs-on.html
---

Attempting to install phantomjs using npm, got an ETIMEOUT error, as you can see below<br /><br /><pre>C:\Users\UserName\Downloads&gt;npm install -g phantomjs<br />npm http GET https://registry.npmjs.org/phantomjs<br />npm http 304 https://registry.npmjs.org/phantomjs<br />npm http GET https://registry.npmjs.org/rimraf<br />npm http GET https://registry.npmjs.org/adm-zip/0.2.1<br />npm http 304 https://registry.npmjs.org/adm-zip/0.2.1<br />npm http 304 https://registry.npmjs.org/rimraf<br />npm http GET https://registry.npmjs.org/graceful-fs<br />npm http 304 https://registry.npmjs.org/graceful-fs<br />C:\Users\UserName\AppData\Roaming\npm\phantomjs -&gt; C:\Users\UserName\AppData\Roaming\npm\node_modules\phantomjs\bin\phantomjs<br /> <br />&gt; phantomjs@1.9.0-3 install C:\Users\UserName\AppData\Roaming\npm\node_modules\phantomjs<br />&gt; node install.js<br /> <br />Requesting C:\Users\UserName\AppData\Roaming\npm\node_modules\phantomjs\tmp\phantomjs-1.9.0-windows.zip<br /> <br />events.js:72<br />        throw er; // Unhandled 'error' event<br />              ^<br />Error: connect ETIMEDOUT<br />    at errnoException (net.js:878:11)<br />    at Object.afterConnect [as oncomplete] (net.js:869:19)<br />npm ERR! phantomjs@1.9.0-3 install: `node install.js`<br />npm ERR! `cmd "/c" "node install.js"` failed with 8<br />npm ERR!<br />npm ERR! Failed at the phantomjs@1.9.0-3 install script.<br />npm ERR! This is most likely a problem with the phantomjs package,<br />npm ERR! not with npm itself.<br />npm ERR! Tell the author that this fails on your system:<br />npm ERR!     node install.js<br />npm ERR! You can get their info via:<br />npm ERR!     npm owner ls phantomjs<br />npm ERR! There is likely additional logging output above.<br /> <br />npm ERR! System Windows_NT 6.1.7601<br />npm ERR! command "C:\\Program Files\\nodejs\\\\node.exe" "C:\\Program Files\\nodejs\\node_modules\\npm\\bin\\npm-cli.js" "install" "-g" "phantomjs"<br />npm ERR! cwd C:\Users\UserName\Downloads<br />npm ERR! node -v v0.10.3<br />npm ERR! npm -v 1.2.17<br />npm ERR! code ELIFECYCLE<br />npm ERR!<br />npm ERR! Additional logging details can be found in:<br />npm ERR!     C:\Users\UserName\Downloads\npm-debug.log<br />npm ERR! not ok code 0</pre><br />I configured npm to use my corporate proxy, and every other package has downloaded and installed successfully, I'm guessing the phantomjs installer is doing something different. Rather than figure out what it's doing different I just downloaded phantomjs-1.9.0-windows.zip to the package so it could install without downloading.<br /><br />Navigate to <br /><blockquote class="tr_bq">C:\Users\UserName\AppData\Roaming\npm-cache\phantomjs\1.9.0-3\package</blockquote>Created dir ‘tmp’<br /><br />Downloaded phantomjs-1.9.0-windows.zip from <a href="https://code.google.com/p/phantomjs/downloads/list">https://code.google.com/p/phantomjs/downloads/list</a><br /><br />Copy phantomjs-1.9.0-windows.zip into the tmp dir, located at  <br /><blockquote class="tr_bq">C:\Users\UserName\AppData\Roaming\npm-cache\phantomjs\1.9.0-3\package\tmp</blockquote>Now I used 7-zip to re-create the package.<br /><br />Navigate to<br /><blockquote class="tr_bq">C:\Users\UserName\AppData\Roaming\npm-cache\phantomjs\1.9.0-3</blockquote>TAR the package dir, so you'll create package.tar<br /><br />Then gzip package.tar, naming it package.tgz, this will overwrite the current file.<br /><br />Then run the installer again and it will use the local phantomjs-1.9.0-windows.zip to complete the install.