---
layout: post
title: ! 'Javascript: Format Number, Price, Amount'
date: '2011-01-04T20:19:00.003+10:00'
author: sacah
tags:
- javascript
- programming
modified_time: '2011-10-20T22:13:51.768+10:00'
blogger_id: tag:blogger.com,1999:blog-4605009901196846959.post-6100093295903381648
blogger_orig_url: http://www.sacah.net/2011/01/javascript-format-number-price-amount.html
---

<br />After looking around at many different number formatting scripts, I figured surely the joy of regular expressions could do this is far fewer lines of code, so off I set and below is my creation. First is the two line function, below that I have put each statement on a new line for ease of explaining what/how it does its formatting.<br /><br /><div>function formatNumber(number) {</div><div style="padding-left: 12px;">number=number+'';</div><div style="padding-left: 12px;">return number.replace(/[^\d\.\-]/g, '').replace(/(\.\d{2})[\W\w]+/g, '$1').split('').reverse().join('').replace(/(\d{3})/g, '$1,').split('').reverse().join('').replace(/^([\-]{0,1}),/, '$1').replace(/(\.\d)$/, '$1'+'0').replace(/\.$/, '.00');</div><div>}</div><br /><pre>formatNumber(-1234.56);<br />formatNumber(1234567.890);<br />formatNumber(123.3);<br />formatNumber('4423897544352423434');</pre><br />Output<br /><pre>-1,234.56<br />1,234,567.89<br />123.30<br />4,423,897,544,352,423,434<br /></pre><br /><pre>function formatNumber(number) {<br />    number=number+'';<br />    return number.replace(/[^\d\.\-]/g, '')<br />      .replace(/(\.\d{2})[\W\w]+/g, '$1')<br />      .split('')<br />      .reverse()<br />      .join('')<br />      .replace(/(\d{3})/g,'$1,')<br />      .split('')<br />      .reverse()<br />      .join('')<br />      .replace(/^([\-]{0,1}),/, '$1')<br />      .replace(/(\.\d)$/, '$1'+'0')<br />      .replace(/\.$/, '.00');<br />}</pre><br /><br /><pre>number=number+'';</pre>Simply converts number into a string.<br /><br /><pre>return number.replace(/[^\d\.\-]/g, '')</pre>Replaces anything that isn't a digit (\d), a full stop (\.) or a minus sign (\-) with an empty string (''). This will get rid of dollar signs, already existing formatting like commas etc.<br /><br /><pre>.replace(/(\.\d{2})[\W\w]+/g, '$1')</pre>Detects the first 2 digits after the first full stop (\.\d{2}) and captures this info. Then detects all characters after the first two digits till the end of the line [\W\w]+. All this gets replaced with the first match. eg 100.1234 (\.\d{2}) matches .12 and [\W\w]+ matches 34. Then .1234 gets replaced with .12<br /><br /><pre>.split('')</pre>Split the string into an Array.<br /><br /><pre>.reverse()</pre>Reverse the array.<br /><br /><pre>.join('')</pre>Join the array back into a String.<br /><br /><pre>.replace(/(\d{3})/g,'$1,')</pre>Match groups of 3 digits (\d{3}), and replace them with the matches text followed by a comma $1,.<br /><br /><pre>.split('')</pre>Split the string into an Array again.<br /><br /><pre>.reverse()</pre>Reverse the array again.<br /><br /><pre>.join('')</pre>Join the array back to a string.<br /><br /><pre>.replace(/^([\-]{0,1}),/, '$1')</pre>Matches 0 to 1 occurrences of a minus sign ([\-]{0,1}) at the start of a line (^), followed by a comma. This gets replaced by the first match, which is either an empty string or a minus sign. -,123 becomes -123.<br /><br /><pre>.replace(/(\.\d)$/, '$1'+'0')</pre>Matches a single digit following a full stop (\.\d) at the end of the line ($), and replaces this with the full stop and digit plus a 0. 1.1 becomes 1.10<br /><br /><pre>.replace(/\.$/, '.00');</pre>Matches a full stop at the end of the line, and replaces it with .00